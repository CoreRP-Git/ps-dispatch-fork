(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}})();function W(){}const vl=e=>e;function bl(e,t){for(const l in t)e[l]=t[l];return e}function Qt(e){return e()}function bt(){return Object.create(null)}function de(e){e.forEach(Qt)}function et(e){return typeof e=="function"}function ke(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ml(e){return Object.keys(e).length===0}function el(e,...t){if(e==null)return W;const l=e.subscribe(...t);return l.unsubscribe?()=>l.unsubscribe():l}function Q(e,t,l){e.$$.on_destroy.push(el(t,l))}function _l(e,t,l,n){if(e){const s=tl(e,t,l,n);return e[0](s)}}function tl(e,t,l,n){return e[1]&&n?bl(l.ctx.slice(),e[1](n(t))):l.ctx}function pl(e,t,l,n){if(e[2]&&n){const s=e[2](n(l));if(t.dirty===void 0)return s;if(typeof s=="object"){const o=[],i=Math.max(t.dirty.length,s.length);for(let r=0;r<i;r+=1)o[r]=t.dirty[r]|s[r];return o}return t.dirty|s}return t.dirty}function gl(e,t,l,n,s,o){if(s){const i=tl(t,l,n,o);e.p(i,s)}}function yl(e){if(e.ctx.length>32){const t=[],l=e.ctx.length/32;for(let n=0;n<l;n++)t[n]=-1;return t}return-1}function Ge(e){return e??""}function ll(e,t,l){return e.set(l),t}function mt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const nl=typeof window<"u";let wl=nl?()=>window.performance.now():()=>Date.now(),ft=nl?e=>requestAnimationFrame(e):W;const Ee=new Set;function sl(e){Ee.forEach(t=>{t.c(e)||(Ee.delete(t),t.f())}),Ee.size!==0&&ft(sl)}function kl(e){let t;return Ee.size===0&&ft(sl),{promise:new Promise(l=>{Ee.add(t={c:e,f:l})}),abort(){Ee.delete(t)}}}function f(e,t){e.appendChild(t)}function il(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $l(e){const t=v("style");return Ml(il(e),t),t.sheet}function Ml(e,t){return f(e.head||e,t),t.sheet}function U(e,t,l){e.insertBefore(t,l||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function Ue(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function v(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function $(){return S(" ")}function Ce(){return S("")}function ue(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function d(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Dl(e){return Array.from(e.childNodes)}function L(e,t){t=""+t,e.data!==t&&(e.data=t)}function ie(e,t,l){e.classList[l?"add":"remove"](t)}function Sl(e,t,{bubbles:l=!1,cancelable:n=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,l,n,t),s}const Ke=new Map;let Je=0;function Al(e){let t=5381,l=e.length;for(;l--;)t=(t<<5)-t^e.charCodeAt(l);return t>>>0}function El(e,t){const l={stylesheet:$l(t),rules:{}};return Ke.set(e,l),l}function _t(e,t,l,n,s,o,i,r=0){const u=16.666/n;let a=`{
`;for(let M=0;M<=1;M+=u){const g=t+(l-t)*o(M);a+=M*100+`%{${i(g,1-g)}}
`}const c=a+`100% {${i(l,1-l)}}
}`,h=`__svelte_${Al(c)}_${r}`,y=il(e),{stylesheet:b,rules:p}=Ke.get(y)||El(y,e);p[h]||(p[h]=!0,b.insertRule(`@keyframes ${h} ${c}`,b.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${h} ${n}ms linear ${s}ms 1 both`,Je+=1,h}function Nl(e,t){const l=(e.style.animation||"").split(", "),n=l.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),s=l.length-n.length;s&&(e.style.animation=n.join(", "),Je-=s,Je||Il())}function Il(){ft(()=>{Je||(Ke.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),Ke.clear())})}let Oe;function Fe(e){Oe=e}function ct(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function tt(e){ct().$$.on_mount.push(e)}function jl(e){ct().$$.after_update.push(e)}function ol(e){ct().$$.on_destroy.push(e)}const Ae=[],pt=[];let Ne=[];const gt=[],Tl=Promise.resolve();let ot=!1;function Ul(){ot||(ot=!0,Tl.then(rl))}function ge(e){Ne.push(e)}const st=new Set;let De=0;function rl(){if(De!==0)return;const e=Oe;do{try{for(;De<Ae.length;){const t=Ae[De];De++,Fe(t),Cl(t.$$)}}catch(t){throw Ae.length=0,De=0,t}for(Fe(null),Ae.length=0,De=0;pt.length;)pt.pop()();for(let t=0;t<Ne.length;t+=1){const l=Ne[t];st.has(l)||(st.add(l),l())}Ne.length=0}while(Ae.length);for(;gt.length;)gt.pop()();ot=!1,st.clear(),Fe(e)}function Cl(e){if(e.fragment!==null){e.update(),de(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ge)}}function Rl(e){const t=[],l=[];Ne.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),Ne=t}let xe;function Ll(){return xe||(xe=Promise.resolve(),xe.then(()=>{xe=null})),xe}function it(e,t,l){e.dispatchEvent(Sl(`${t?"intro":"outro"}${l}`))}const Ye=new Set;let ce;function ye(){ce={r:0,c:[],p:ce}}function we(){ce.r||de(ce.c),ce=ce.p}function P(e,t){e&&e.i&&(Ye.delete(e),e.i(t))}function Y(e,t,l,n){if(e&&e.o){if(Ye.has(e))return;Ye.add(e),ce.c.push(()=>{Ye.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}const xl={duration:0};function Ie(e,t,l,n){const s={direction:"both"};let o=t(e,l,s),i=n?0:1,r=null,u=null,a=null;function c(){a&&Nl(e,a)}function h(b,p){const _=b.b-i;return p*=Math.abs(_),{a:i,b:b.b,d:_,duration:p,start:b.start,end:b.start+p,group:b.group}}function y(b){const{delay:p=0,duration:_=300,easing:M=vl,tick:g=W,css:E}=o||xl,R={start:wl()+p,b};b||(R.group=ce,ce.r+=1),r||u?u=R:(E&&(c(),a=_t(e,i,b,_,p,M,E)),b&&g(0,1),r=h(R,_),ge(()=>it(e,b,"start")),kl(x=>{if(u&&x>u.start&&(r=h(u,_),u=null,it(e,r.b,"start"),E&&(c(),a=_t(e,i,r.b,r.duration,0,M,o.css))),r){if(x>=r.end)g(i=r.b,1-i),it(e,r.b,"end"),u||(r.b?c():--r.group.r||de(r.group.c)),r=null;else if(x>=r.start){const O=x-r.start;i=r.a+r.d*M(O/r.duration),g(i,1-i)}}return!!(r||u)}))}return{run(b){et(o)?Ll().then(()=>{o=o(s),y(b)}):y(b)},end(){c(),r=u=null}}}function Pl(e,t){Y(e,1,1,()=>{t.delete(e.key)})}function Fl(e,t,l,n,s,o,i,r,u,a,c,h){let y=e.length,b=o.length,p=y;const _={};for(;p--;)_[e[p].key]=p;const M=[],g=new Map,E=new Map,R=[];for(p=b;p--;){const D=h(s,o,p),m=l(D);let N=i.get(m);N?n&&R.push(()=>N.p(D,t)):(N=a(m,D),N.c()),g.set(m,M[p]=N),m in _&&E.set(m,Math.abs(p-_[m]))}const x=new Set,O=new Set;function z(D){P(D,1),D.m(r,c),i.set(D.key,D),c=D.first,b--}for(;y&&b;){const D=M[b-1],m=e[y-1],N=D.key,F=m.key;D===m?(c=D.first,y--,b--):g.has(F)?!i.has(N)||x.has(N)?z(D):O.has(F)?y--:E.get(N)>E.get(F)?(O.add(N),z(D)):(x.add(F),y--):(u(m,i),y--)}for(;y--;){const D=e[y];g.has(D.key)||u(D,i)}for(;b;)z(M[b-1]);return de(R),M}function Ve(e){e&&e.c()}function je(e,t,l,n){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,l),n||ge(()=>{const i=e.$$.on_mount.map(Qt).filter(et);e.$$.on_destroy?e.$$.on_destroy.push(...i):de(i),e.$$.on_mount=[]}),o.forEach(ge)}function Te(e,t){const l=e.$$;l.fragment!==null&&(Rl(l.after_update),de(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Bl(e,t){e.$$.dirty[0]===-1&&(Ae.push(e),Ul(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Re(e,t,l,n,s,o,i,r=[-1]){const u=Oe;Fe(e);const a=e.$$={fragment:null,ctx:[],props:o,update:W,not_equal:s,bound:bt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:bt(),dirty:r,skip_bound:!1,root:t.target||u.$$.root};i&&i(a.root);let c=!1;if(a.ctx=l?l(e,t.props||{},(h,y,...b)=>{const p=b.length?b[0]:y;return a.ctx&&s(a.ctx[h],a.ctx[h]=p)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](p),c&&Bl(e,h)),y}):[],a.update(),c=!0,de(a.before_update),a.fragment=n?n(a.ctx):!1,t.target){if(t.hydrate){const h=Dl(t.target);a.fragment&&a.fragment.l(h),h.forEach(j)}else a.fragment&&a.fragment.c();t.intro&&P(e.$$.fragment),je(e,t.target,t.anchor,t.customElement),rl()}Fe(u)}class Le{$destroy(){Te(this,1),this.$destroy=W}$on(t,l){if(!et(l))return W;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const s=n.indexOf(l);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!ml(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Pe(e,t){const l=n=>{const{action:s,data:o}=n.data;s===e&&t(o)};tt(()=>window.addEventListener("message",l)),ol(()=>window.removeEventListener("message",l))}const Se=[];function Ol(e,t){return{subscribe:ne(e,t).subscribe}}function ne(e,t=W){let l;const n=new Set;function s(r){if(ke(e,r)&&(e=r,l)){const u=!Se.length;for(const a of n)a[1](),Se.push(a,e);if(u){for(let a=0;a<Se.length;a+=2)Se[a][0](Se[a+1]);Se.length=0}}}function o(r){s(r(e))}function i(r,u=W){const a=[r,u];return n.add(a),n.size===1&&(l=t(s)||W),r(e),()=>{n.delete(a),n.size===0&&l&&(l(),l=null)}}return{set:s,update:o,subscribe:i}}function Vl(e,t,l){const n=!Array.isArray(e),s=n?[e]:e,o=t.length<2;return Ol(l,i=>{let r=!1;const u=[];let a=0,c=W;const h=()=>{if(a)return;c();const b=t(n?u[0]:u,i);o?i(b):c=et(b)?b:W},y=s.map((b,p)=>el(b,_=>{u[p]=_,a&=~(1<<p),r&&h()},()=>{a|=1<<p}));return r=!0,h(),function(){de(y),c(),r=!1}})}const pe=ne(!1),lt=ne(!1),rt=ne(""),We=ne(null),al=ne(null),ul=ne(""),yt=ne(!1),wt=ne(!1),dt=ne(null),at=ne(!0),fl=ne(!0);function zl(e){dt.update(t=>t.filter(l=>l.data.id!==e))}const qe=ne(null),Xe=ne(null),kt=Vl([qe,al,We],([e,t,l])=>!e||t===null||!l?[]:e.slice(-t).filter(n=>n.message&&n.jobs.includes(l.job.type)).reverse());let ut=!1;lt.subscribe(e=>{ut=e});let cl="";rt.subscribe(e=>{cl=e});async function ae(e,t={},l){if(ut==!0&&l||ut==!0)return Promise.resolve(l||{});const n={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},s=window.GetParentResourceName?window.GetParentResourceName():cl;return await(await fetch(`https://${s}/${e}`,n)).json()}function $t(e){let t,l;const n=e[2].default,s=_l(n,e,e[1],null);return{c(){t=v("main"),s&&s.c(),d(t,"class","svelte-a4h32x")},m(o,i){U(o,t,i),s&&s.m(t,null),l=!0},p(o,i){s&&s.p&&(!l||i&2)&&gl(s,n,o,o[1],l?pl(n,o[1],i,null):yl(o[1]),null)},i(o){l||(P(s,o),l=!0)},o(o){Y(s,o),l=!1},d(o){o&&j(t),s&&s.d(o)}}}function Hl(e){let t,l,n=e[0]&&$t(e);return{c(){n&&n.c(),t=Ce()},m(s,o){n&&n.m(s,o),U(s,t,o),l=!0},p(s,[o]){s[0]?n?(n.p(s,o),o&1&&P(n,1)):(n=$t(s),n.c(),P(n,1),n.m(t.parentNode,t)):n&&(ye(),Y(n,1,1,()=>{n=null}),we())},i(s){l||(P(n),l=!0)},o(s){Y(n),l=!1},d(s){n&&n.d(s),s&&j(t)}}}function Yl(e,t,l){let n,s;Q(e,lt,u=>l(4,n=u)),Q(e,pe,u=>l(0,s=u));let{$$slots:o={},$$scope:i}=t,r;return pe.subscribe(u=>{r=u}),Pe("setVisible",u=>{pe.set(u)}),tt(()=>{const u=a=>{r&&a.code==="Escape"&&(ae("hideUI"),pe.set(!1)),!r&&a.code==="Escape"&&n&&(ae("setVisible",!0),pe.set(!0))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)}),e.$$set=u=>{"$$scope"in u&&l(1,i=u.$$scope)},[s,i,o]}class Gl extends Le{constructor(t){super(),Re(this,t,Yl,Hl,ke,{})}}const Kl=()=>!window.invokeNative,Be=(e,t=0)=>{if(Kl())for(const l of e)setTimeout(()=>{window.dispatchEvent(new MessageEvent("message",{data:{action:l.action,data:l.data}}))},t)};function dl(e){const t=e-1;return t*t*t+1}function Ze(e,{delay:t=0,duration:l=400,easing:n=dl,x:s=0,y:o=0,opacity:i=0}={}){const r=getComputedStyle(e),u=+r.opacity,a=r.transform==="none"?"":r.transform,c=u*(1-i),[h,y]=mt(s),[b,p]=mt(o);return{delay:t,duration:l,easing:n,css:(_,M)=>`
			transform: ${a} translate(${(1-_)*h}${y}, ${(1-_)*b}${p});
			opacity: ${u-c*M}`}}function Mt(e,{delay:t=0,duration:l=400,easing:n=dl,axis:s="y"}={}){const o=getComputedStyle(e),i=+o.opacity,r=s==="y"?"height":"width",u=parseFloat(o[r]),a=s==="y"?["top","bottom"]:["left","right"],c=a.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),h=parseFloat(o[`padding${c[0]}`]),y=parseFloat(o[`padding${c[1]}`]),b=parseFloat(o[`margin${c[0]}`]),p=parseFloat(o[`margin${c[1]}`]),_=parseFloat(o[`border${c[0]}Width`]),M=parseFloat(o[`border${c[1]}Width`]);return{delay:t,duration:l,easing:n,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*i};${r}: ${g*u}px;padding-${a[0]}: ${g*h}px;padding-${a[1]}: ${g*y}px;margin-${a[0]}: ${g*b}px;margin-${a[1]}: ${g*p}px;border-${a[0]}-width: ${g*_}px;border-${a[1]}-width: ${g*M}px;`}}function Dt(e,t,l){const n=e.slice();return n[7]=t[l],n}function St(e,t,l){const n=e.slice();return n[10]=t[l],n}function At(e){let t,l=e[1],n=[];for(let s=0;s<l.length;s+=1)n[s]=Nt(Dt(e,l,s));return{c(){t=v("div");for(let s=0;s<n.length;s+=1)n[s].c();d(t,"class","w-fit h-fit bg-[#25303B] p-2")},m(s,o){U(s,t,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(t,null)},p(s,o){if(o&2){l=s[1];let i;for(i=0;i<l.length;i+=1){const r=Dt(s,l,i);n[i]?n[i].p(r,o):(n[i]=Nt(r),n[i].c(),n[i].m(t,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){s&&j(t),Ue(n,s)}}}function Et(e){let t,l=e[10].name+"",n,s,o;function i(){return e[3](e[10])}return{c(){t=v("button"),n=S(l),d(t,"class","bg-[#0098A3] text-white p-2")},m(r,u){U(r,t,u),f(t,n),s||(o=ue(t,"click",i),s=!0)},p(r,u){e=r},d(r){r&&j(t),s=!1,o()}}}function Nt(e){let t,l,n=e[7].component+"",s,o,i,r=e[7].actions,u=[];for(let a=0;a<r.length;a+=1)u[a]=Et(St(e,r,a));return{c(){t=v("div"),l=v("p"),s=S(n),o=$();for(let a=0;a<u.length;a+=1)u[a].c();i=$(),d(l,"class","text-white mr-4"),d(t,"class","flex flex-row gap-2 items-center")},m(a,c){U(a,t,c),f(t,l),f(l,s),f(t,o);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(t,null);f(t,i)},p(a,c){if(c&2){r=a[7].actions;let h;for(h=0;h<r.length;h+=1){const y=St(a,r,h);u[h]?u[h].p(y,c):(u[h]=Et(y),u[h].c(),u[h].m(t,i))}for(;h<u.length;h+=1)u[h].d(1);u.length=r.length}},d(a){a&&j(t),Ue(u,a)}}}function Jl(e){let t,l,n,s,o,i=e[0]&&At(e);return{c(){t=v("div"),l=v("button"),l.textContent="Show",n=$(),i&&i.c(),d(l,"class","bg-[#232B33] text-white p-2 font-medium"),d(t,"class","absolute top-0 z-[1000]")},m(r,u){U(r,t,u),f(t,l),f(t,n),i&&i.m(t,null),s||(o=ue(l,"click",e[2]),s=!0)},p(r,[u]){r[0]?i?i.p(r,u):(i=At(r),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},i:W,o:W,d(r){r&&j(t),i&&i.d(),s=!1,o()}}}function Wl(e,t,l){let n=!1;const s={dispatch_detach:"Detach",dispatch_attach:"Attach",unit:"Unit",units:"Units",additionals:"More Units"},o={citizenid:"DEV123",job:{type:"police",name:"LSPD"},charinfo:{firstname:"Dev",lastname:"Officer"},metadata:{callsign:"1-Adam-1"}},i=[{id:1,message:"Armed Robbery in Progress",code:"10-31",icon:"fas fa-gun",time:Date.now()-3e5,priority:1,street:"Grove Street",coords:[-1234.56,7890.12],gender:"Male",automaticGunFire:!1,weapon:"Pistol",units:[],name:"John Doe",number:"555-0123",information:"Suspect wearing black hoodie",vehicle:"Sedan",color:"Black",plate:"ABC123",class:"Compact",doors:"4",heading:"North",jobs:["police","sheriff"]},{id:2,message:"Traffic Stop",code:"10-54",icon:"fas fa-car",time:Date.now()-6e5,priority:3,street:"Main Street",coords:[-1100.25,7500.75],gender:"Female",automaticGunFire:!1,weapon:"",units:[o],name:"Jane Smith",number:"555-0456",information:"Speeding violation",vehicle:"SUV",color:"Red",plate:"XYZ789",class:"SUV",doors:"4",heading:"South",jobs:["police"]}];return[n,[{component:"Show",actions:[{name:"Show Dispatch",custom:!0,customFunction:()=>{Be([{action:"setBrowserMode",data:!0},{action:"setupUI",data:{player:o,locales:s,keybind:"G",maxCallList:10,shortCalls:!0}},{action:"setDispatchs",data:i},{action:"setVisible",data:!0}],100),console.log("Debug: All systems initialized")}},{name:"Add New Call",custom:!0,customFunction:()=>{const c={id:Math.floor(Math.random()*1e3)+100,message:["Armed Robbery","Traffic Accident","Domestic Violence","Burglary","Drug Deal"][Math.floor(Math.random()*5)],code:"10-"+(Math.floor(Math.random()*99)+10),icon:"fas fa-exclamation-triangle",time:Date.now(),priority:Math.floor(Math.random()*3)+1,street:"Test Street "+Math.floor(Math.random()*50),coords:[Math.random()*2e3-1e3,Math.random()*2e3-1e3],gender:["Male","Female"][Math.floor(Math.random()*2)],automaticGunFire:Math.random()>.8,weapon:["Pistol","Knife","Rifle","None"][Math.floor(Math.random()*4)],units:[],name:"Test Person "+Math.floor(Math.random()*100),number:"555-"+Math.floor(Math.random()*9999).toString().padStart(4,"0"),information:"Random test incident",vehicle:["Sedan","SUV","Truck","Motorcycle"][Math.floor(Math.random()*4)],color:["Black","White","Red","Blue","Silver"][Math.floor(Math.random()*5)],plate:Math.random().toString(36).substr(2,7).toUpperCase(),class:"Standard",doors:"4",heading:["North","South","East","West"][Math.floor(Math.random()*4)],jobs:["police"]},h=[...i,c];i.push(c),Be([{action:"setDispatchs",data:h}]),console.log("Debug: New call added",c),console.log("Debug: Total calls now:",h.length)}}]}],()=>{l(0,n=!n)},c=>{if(c.custom==!0){c.customFunction();return}Be([{action:c.action,data:c.data}])}]}class ql extends Le{constructor(t){super(),Re(this,t,Wl,Jl,ke,{})}}function Xl(e,t,l){let n;Q(e,pe,o=>l(0,n=o)),Be([{action:"setVisible",data:!0}]),Be([{action:"setBrowserMode",data:!0}]);function s(o){o.key==="="&&ll(pe,n=!0,n)}return Pe("setBrowserMode",o=>{lt.set(o),console.log("browser mode enabled"),o?window.addEventListener("keydown",s):window.removeEventListener("keydown",s)}),Pe("newCall",o=>{dt.update(i=>(i=i||[],i.push(o),i))}),Pe("setDispatchs",o=>{qe.set(o)}),Pe("setupUI",o=>{We.set(o.player),Xe.set(o.locales),ul.set(o.keybind),al.set(o.maxCallList),fl.set(o.shortCalls)}),[]}class Zl extends Le{constructor(t){super(),Re(this,t,Xl,null,ke,{})}}const Ql=["January","February","March","April","May","June","July","August","September","October","November","December"];function He(e,t=!1,l=!1){const n=e.getDate(),s=Ql[e.getMonth()],o=e.getFullYear(),i=e.getHours();let r=e.getMinutes();return r<10&&(r=`0${r}`),t?`${t} at ${i}:${r}`:l?`${n}. ${s} at ${i}:${r}`:`${n}. ${s} ${o}. at ${i}:${r}`}function Qe(e){if(!e)return"Unknown";let t;try{t=typeof e=="object"?e:new Date(e)}catch{return"Invalid date"}if(isNaN(t))return"Invalid date";const l=864e5,n=new Date,s=new Date(n-l),o=Math.round((n-t)/1e3),i=Math.round(o/60),r=n.toDateString()===t.toDateString(),u=s.toDateString()===t.toDateString(),a=n.getFullYear()===t.getFullYear();return o<5?"Just Now":o<60?`${o} Seconds ago`:o<90?"A minute ago":i<60?`${i} Minutes ago`:r?He(t,"Today"):u?He(t,"Yesterday"):a?He(t,!1,!0):He(t)}function It(e,t,l){const n=e.slice();return n[21]=t[l],n[23]=l,n}function jt(e,t,l){const n=e.slice();return n[24]=t[l],n}function Tt(e,t,l){const n=e.slice();return n[27]=t[l],n}function en(e){let t;return{c(){t=v("div"),t.innerHTML=`<div class="bg-slate-900 border-l-4 border-blue-500 p-[3vh] text-center"><i class="fas fa-radio text-[4vh] text-slate-600 mb-[1vh]"></i> 
            <h3 class="text-slate-400 font-medium text-[1.6vh] mb-[0.5vh]">No Active Dispatches</h3> 
            <p class="text-slate-500 text-[1.2vh]">All units on standby</p></div>`,d(t,"class","flex flex-col items-center justify-center h-full text-center py-[4vh]")},m(l,n){U(l,t,n)},p:W,i:W,o:W,d(l){l&&j(t)}}}function tn(e){let t,l,n=e[5],s=[];for(let i=0;i<n.length;i+=1)s[i]=Vt(It(e,n,i));const o=i=>Y(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();t=Ce()},m(i,r){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(i,r);U(i,t,r),l=!0},p(i,r){if(r&18339){n=i[5];let u;for(u=0;u<n.length;u+=1){const a=It(i,n,u);s[u]?(s[u].p(a,r),P(s[u],1)):(s[u]=Vt(a),s[u].c(),P(s[u],1),s[u].m(t.parentNode,t))}for(ye(),u=n.length;u<s.length;u+=1)o(u);we()}},i(i){if(!l){for(let r=0;r<n.length;r+=1)P(s[r]);l=!0}},o(i){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)Y(s[r]);l=!1},d(i){Ue(s,i),i&&j(t)}}}function Ut(e){let t,l,n,s,o=e[21].street+"",i;return{c(){t=v("div"),l=v("i"),n=$(),s=v("span"),i=S(o),d(l,"class","fas fa-map-marker-alt text-[0.9vh] w-[1vh]"),d(s,"class","truncate"),d(t,"class","flex items-center gap-[0.3vh]")},m(r,u){U(r,t,u),f(t,l),f(t,n),f(t,s),f(s,i)},p(r,u){u&32&&o!==(o=r[21].street+"")&&L(i,o)},d(r){r&&j(t)}}}function Ct(e){let t,l,n,s,o=e[21].name+"",i;return{c(){t=v("div"),l=v("i"),n=$(),s=v("span"),i=S(o),d(l,"class","fas fa-user text-[0.9vh] w-[1vh]"),d(s,"class","truncate"),d(t,"class","flex items-center gap-[0.3vh]")},m(r,u){U(r,t,u),f(t,l),f(t,n),f(t,s),f(s,i)},p(r,u){u&32&&o!==(o=r[21].name+"")&&L(i,o)},d(r){r&&j(t)}}}function Rt(e){let t,l,n,s,o=e[21].vehicle+"",i;return{c(){t=v("div"),l=v("i"),n=$(),s=v("span"),i=S(o),d(l,"class","fas fa-car text-[0.9vh] w-[1vh]"),d(s,"class","truncate"),d(t,"class","flex items-center gap-[0.3vh]")},m(r,u){U(r,t,u),f(t,l),f(t,n),f(t,s),f(s,i)},p(r,u){u&32&&o!==(o=r[21].vehicle+"")&&L(i,o)},d(r){r&&j(t)}}}function Lt(e){let t,l,n,s,o,i,r,u,a,c,h,y,b,p,_=e[21].units.length+"",M,g,E=e[8].units+"",R,x,O,z,D,m,N,F,q,J=e[14](e[21]),T=[];for(let w=0;w<J.length;w+=1)T[w]=Pt(Tt(e,J,w));let B=e[21].units.length>0&&Ft(e);function se(w,I){return I&160&&(h=null),h==null&&(h=!!he(w[21].units,w[7].citizenid)),h?nn:ln}let V=se(e,-1),A=V(e);function C(){return e[19](e[21])}return{c(){t=v("div"),l=v("div");for(let w=0;w<T.length;w+=1)T[w].c();n=$(),B&&B.c(),s=$(),o=v("button"),i=v("div"),r=v("i"),a=$(),c=v("span"),A.c(),y=$(),b=v("span"),p=S("("),M=S(_),g=$(),R=S(E),x=S(")"),O=$(),z=v("i"),d(l,"class","grid grid-cols-1 gap-[0.5vh] mb-[1vh] text-[1.1vh]"),d(r,"class",u="fas fa-"+(he(e[21].units,e[7].citizenid)?"unlink":"link")+" text-[1.1vh]"),d(b,"class","text-[1vh] opacity-75"),d(i,"class","flex items-center gap-[1vh]"),d(z,"class","fas fa-chevron-right text-[1vh]"),d(o,"class",D="w-full "+(e[21].priority==1?he(e[21].units,e[7].citizenid)?"bg-red-800 hover:bg-red-700":"bg-red-700 hover:bg-red-600":he(e[21].units,e[7].citizenid)?"bg-amber-700 hover:bg-amber-600":"bg-blue-700 hover:bg-blue-600")+" p-[1vh] transition-colors duration-200 text-white font-medium text-[1.2vh] flex items-center justify-between"),d(t,"class","border-t border-slate-700 bg-slate-800 px-[1.5vh] py-[1vh] svelte-1oyl3xv")},m(w,I){U(w,t,I),f(t,l);for(let k=0;k<T.length;k+=1)T[k]&&T[k].m(l,null);f(t,n),B&&B.m(t,null),f(t,s),f(t,o),f(o,i),f(i,r),f(i,a),f(i,c),A.m(c,null),f(i,y),f(i,b),f(b,p),f(b,M),f(b,g),f(b,R),f(b,x),f(o,O),f(o,z),N=!0,F||(q=ue(o,"click",C),F=!0)},p(w,I){if(e=w,I&16416){J=e[14](e[21]);let k;for(k=0;k<J.length;k+=1){const re=Tt(e,J,k);T[k]?T[k].p(re,I):(T[k]=Pt(re),T[k].c(),T[k].m(l,null))}for(;k<T.length;k+=1)T[k].d(1);T.length=J.length}e[21].units.length>0?B?B.p(e,I):(B=Ft(e),B.c(),B.m(t,s)):B&&(B.d(1),B=null),(!N||I&160&&u!==(u="fas fa-"+(he(e[21].units,e[7].citizenid)?"unlink":"link")+" text-[1.1vh]"))&&d(r,"class",u),V===(V=se(e,I))&&A?A.p(e,I):(A.d(1),A=V(e),A&&(A.c(),A.m(c,null))),(!N||I&32)&&_!==(_=e[21].units.length+"")&&L(M,_),(!N||I&256)&&E!==(E=e[8].units+"")&&L(R,E),(!N||I&160&&D!==(D="w-full "+(e[21].priority==1?he(e[21].units,e[7].citizenid)?"bg-red-800 hover:bg-red-700":"bg-red-700 hover:bg-red-600":he(e[21].units,e[7].citizenid)?"bg-amber-700 hover:bg-amber-600":"bg-blue-700 hover:bg-blue-600")+" p-[1vh] transition-colors duration-200 text-white font-medium text-[1.2vh] flex items-center justify-between"))&&d(o,"class",D)},i(w){N||(ge(()=>{N&&(m||(m=Ie(t,Mt,{duration:300},!0)),m.run(1))}),N=!0)},o(w){m||(m=Ie(t,Mt,{duration:300},!1)),m.run(0),N=!1},d(w){w&&j(t),Ue(T,w),B&&B.d(),A.d(),w&&m&&m.end(),F=!1,q()}}}function xt(e){let t,l,n,s,o,i=e[27].label+"",r,u,a,c,h=e[27].value+"",y,b;return{c(){t=v("div"),l=v("i"),s=$(),o=v("span"),r=S(i),u=S(":"),a=$(),c=v("span"),y=S(h),b=$(),d(l,"class",n=e[27].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv"),d(o,"class","text-slate-500 min-w-[8vh]"),d(c,"class","text-slate-300"),d(t,"class","flex items-center gap-[1vh] py-[0.3vh]")},m(p,_){U(p,t,_),f(t,l),f(t,s),f(t,o),f(o,r),f(o,u),f(t,a),f(t,c),f(c,y),f(t,b)},p(p,_){_&32&&n!==(n=p[27].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv")&&d(l,"class",n),_&32&&i!==(i=p[27].label+"")&&L(r,i),_&32&&h!==(h=p[27].value+"")&&L(y,h)},d(p){p&&j(t)}}}function Pt(e){let t=e[27].value&&!["Time","Units"].includes(e[27].label),l,n=t&&xt(e);return{c(){n&&n.c(),l=Ce()},m(s,o){n&&n.m(s,o),U(s,l,o)},p(s,o){o&32&&(t=s[27].value&&!["Time","Units"].includes(s[27].label)),t?n?n.p(s,o):(n=xt(s),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(s){n&&n.d(s),s&&j(l)}}}function Ft(e){let t,l,n,s,o,i=e[21].units.length+"",r,u,a,c,h,y=e[21].units.slice(0,e[1][e[21].id]?e[21].units.length:3),b=[];for(let _=0;_<y.length;_+=1)b[_]=Bt(jt(e,y,_));let p=e[21].units.length>3&&!e[1][e[21].id]&&Ot(e);return{c(){t=v("div"),l=v("div"),n=v("h4"),s=v("i"),o=S(`
                    ASSIGNED UNITS (`),r=S(i),u=S(")"),a=$(),c=v("div");for(let _=0;_<b.length;_+=1)b[_].c();h=$(),p&&p.c(),d(s,"class","fas fa-users text-[1vh]"),d(n,"class","text-slate-400 text-[1.1vh] font-medium mb-[0.5vh] flex items-center gap-[0.5vh]"),d(c,"class","space-y-[0.3vh] max-h-[15vh] overflow-y-auto"),d(l,"class","border-t border-slate-700 pt-[1vh]"),d(t,"class","mb-[1vh]")},m(_,M){U(_,t,M),f(t,l),f(l,n),f(n,s),f(n,o),f(n,r),f(n,u),f(l,a),f(l,c);for(let g=0;g<b.length;g+=1)b[g]&&b[g].m(c,null);f(c,h),p&&p.m(c,null)},p(_,M){if(M&32&&i!==(i=_[21].units.length+"")&&L(r,i),M&34){y=_[21].units.slice(0,_[1][_[21].id]?_[21].units.length:3);let g;for(g=0;g<y.length;g+=1){const E=jt(_,y,g);b[g]?b[g].p(E,M):(b[g]=Bt(E),b[g].c(),b[g].m(c,h))}for(;g<b.length;g+=1)b[g].d(1);b.length=y.length}_[21].units.length>3&&!_[1][_[21].id]?p?p.p(_,M):(p=Ot(_),p.c(),p.m(c,null)):p&&(p.d(1),p=null)},d(_){_&&j(t),Ue(b,_),p&&p.d()}}}function Bt(e){let t,l,n=e[24].metadata.callsign+"",s,o,i,r=e[24].job.name+"",u,a,c,h,y=e[24].charinfo.firstname+"",b,p,_=e[24].charinfo.lastname+"",M;return{c(){t=v("div"),l=v("span"),s=S(n),o=$(),i=v("span"),u=S(r),c=$(),h=v("span"),b=S(y),p=$(),M=S(_),d(l,"class","px-[0.8vh] py-[0.2vh] bg-blue-600 text-white font-bold font-mono"),d(i,"class",a="px-[0.8vh] py-[0.2vh] uppercase text-white font-medium "+(e[24].job.type=="leo"?"bg-blue-700":e[24].job.type=="ems"?"bg-red-700":"bg-slate-600")),d(h,"class","text-slate-300 flex-1"),d(t,"class","bg-slate-700 p-[0.8vh] flex items-center gap-[1vh] text-[1vh]")},m(g,E){U(g,t,E),f(t,l),f(l,s),f(t,o),f(t,i),f(i,u),f(t,c),f(t,h),f(h,b),f(h,p),f(h,M)},p(g,E){E&34&&n!==(n=g[24].metadata.callsign+"")&&L(s,n),E&34&&r!==(r=g[24].job.name+"")&&L(u,r),E&34&&a!==(a="px-[0.8vh] py-[0.2vh] uppercase text-white font-medium "+(g[24].job.type=="leo"?"bg-blue-700":g[24].job.type=="ems"?"bg-red-700":"bg-slate-600"))&&d(i,"class",a),E&34&&y!==(y=g[24].charinfo.firstname+"")&&L(b,y),E&34&&_!==(_=g[24].charinfo.lastname+"")&&L(M,_)},d(g){g&&j(t)}}}function Ot(e){let t,l,n,s=zt(e[21])+"",o,i,r,u;function a(){return e[18](e[21])}return{c(){t=v("button"),l=v("i"),n=S(`
                        Show `),o=S(s),i=S(" more units"),d(l,"class","fas fa-chevron-down mr-[0.5vh]"),d(t,"class","w-full bg-slate-600 hover:bg-slate-500 p-[0.5vh] transition-colors duration-200 text-slate-300 text-[1vh]")},m(c,h){U(c,t,h),f(t,l),f(t,n),f(t,o),f(t,i),r||(u=ue(t,"click",a),r=!0)},p(c,h){e=c,h&32&&s!==(s=zt(e[21])+"")&&L(o,s)},d(c){c&&j(t),r=!1,u()}}}function ln(e){let t=e[8].dispatch_attach+"",l;return{c(){l=S(t)},m(n,s){U(n,l,s)},p(n,s){s&256&&t!==(t=n[8].dispatch_attach+"")&&L(l,t)},d(n){n&&j(l)}}}function nn(e){let t=e[8].dispatch_detach+"",l;return{c(){l=S(t)},m(n,s){U(n,l,s)},p(n,s){s&256&&t!==(t=n[8].dispatch_detach+"")&&L(l,t)},d(n){n&&j(l)}}}function Vt(e){let t,l,n,s,o,i,r=e[21].id+"",u,a,c,h=e[21].code+"",y,b,p,_,M,g,E,R,x,O,z,D,m,N,F=e[21].message+"",q,J,T,B,se,V=Qe(e[21].time)+"",A,C,w,I,k,re,fe,$e,oe,ve,be=e[21].units.length+"",X,H,Me,me,ht,ze,Z,nt,vt,ee=e[21].street&&Ut(e),te=e[21].name&&Ct(e),le=e[21].vehicle&&Rt(e);function hl(){return e[17](e[21])}let G=e[0]===e[21].id&&Lt(e);return{c(){t=v("div"),l=v("div"),n=v("button"),s=v("div"),o=v("div"),i=S("#"),u=S(r),a=$(),c=v("div"),y=S(h),p=$(),_=v("div"),M=v("div"),g=v("i"),x=$(),O=v("i"),D=$(),m=v("div"),N=v("h3"),q=S(F),J=$(),T=v("p"),B=v("i"),se=$(),A=S(V),C=$(),w=v("div"),ee&&ee.c(),I=$(),te&&te.c(),k=$(),le&&le.c(),re=$(),fe=v("div"),$e=v("i"),oe=$(),ve=v("span"),X=S(be),H=S(" Units"),Me=$(),G&&G.c(),ht=$(),d(o,"class","px-[1vh] py-[0.3vh] bg-blue-600 text-white font-bold text-[1.2vh] font-mono rounded-lg"),d(c,"class",b="px-[1vh] py-[0.3vh] "+(e[21].priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"),d(g,"class",E=Ge(e[21].icon)+" svelte-1oyl3xv"),d(M,"class",R=(e[21].priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"),d(O,"class",z="fas fa-chevron-"+(e[0]===e[21].id?"up":"down")+" text-slate-500 text-[1vh]"),d(_,"class","ml-auto flex items-center gap-[1vh]"),d(s,"class","flex items-center gap-[1vh] mb-[1vh]"),d(N,"class","text-white text-[1.4vh] font-medium"),d(B,"class","fas fa-clock mr-[0.5vh]"),d(T,"class","text-slate-400 text-[1.1vh] mt-[0.3vh]"),d(m,"class","mb-[1vh]"),d($e,"class","fas fa-users text-[0.9vh] w-[1vh]"),d(fe,"class","flex items-center gap-[0.3vh]"),d(w,"class","grid grid-cols-2 gap-[0.5vh] text-[1vh] text-slate-400"),d(n,"class","w-full p-[1.5vh] text-left svelte-1oyl3xv"),d(l,"class",me=(e[21].priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"),d(t,"class",ze="mb-[1vh] "+(e[21].priority==1?"border-l-4 border-red-500":"border-l-4 border-blue-500"))},m(_e,K){U(_e,t,K),f(t,l),f(l,n),f(n,s),f(s,o),f(o,i),f(o,u),f(s,a),f(s,c),f(c,y),f(s,p),f(s,_),f(_,M),f(M,g),f(_,x),f(_,O),f(n,D),f(n,m),f(m,N),f(N,q),f(m,J),f(m,T),f(T,B),f(T,se),f(T,A),f(n,C),f(n,w),ee&&ee.m(w,null),f(w,I),te&&te.m(w,null),f(w,k),le&&le.m(w,null),f(w,re),f(w,fe),f(fe,$e),f(fe,oe),f(fe,ve),f(ve,X),f(ve,H),f(l,Me),G&&G.m(l,null),f(t,ht),Z=!0,nt||(vt=ue(n,"click",hl),nt=!0)},p(_e,K){e=_e,(!Z||K&32)&&r!==(r=e[21].id+"")&&L(u,r),(!Z||K&32)&&h!==(h=e[21].code+"")&&L(y,h),(!Z||K&32&&b!==(b="px-[1vh] py-[0.3vh] "+(e[21].priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"))&&d(c,"class",b),(!Z||K&32&&E!==(E=Ge(e[21].icon)+" svelte-1oyl3xv"))&&d(g,"class",E),(!Z||K&32&&R!==(R=(e[21].priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"))&&d(M,"class",R),(!Z||K&33&&z!==(z="fas fa-chevron-"+(e[0]===e[21].id?"up":"down")+" text-slate-500 text-[1vh]"))&&d(O,"class",z),(!Z||K&32)&&F!==(F=e[21].message+"")&&L(q,F),(!Z||K&32)&&V!==(V=Qe(e[21].time)+"")&&L(A,V),e[21].street?ee?ee.p(e,K):(ee=Ut(e),ee.c(),ee.m(w,I)):ee&&(ee.d(1),ee=null),e[21].name?te?te.p(e,K):(te=Ct(e),te.c(),te.m(w,k)):te&&(te.d(1),te=null),e[21].vehicle?le?le.p(e,K):(le=Rt(e),le.c(),le.m(w,re)):le&&(le.d(1),le=null),(!Z||K&32)&&be!==(be=e[21].units.length+"")&&L(X,be),e[0]===e[21].id?G?(G.p(e,K),K&33&&P(G,1)):(G=Lt(e),G.c(),P(G,1),G.m(l,null)):G&&(ye(),Y(G,1,1,()=>{G=null}),we()),(!Z||K&32&&me!==(me=(e[21].priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"))&&d(l,"class",me),(!Z||K&32&&ze!==(ze="mb-[1vh] "+(e[21].priority==1?"border-l-4 border-red-500":"border-l-4 border-blue-500")))&&d(t,"class",ze)},i(_e){Z||(P(G),Z=!0)},o(_e){Y(G),Z=!1},d(_e){_e&&j(t),ee&&ee.d(),te&&te.d(),le&&le.d(),G&&G.d(),nt=!1,vt()}}}function sn(e){var be;let t,l,n,s,o,i,r,u,a,c,h,y,b,p,_,M,g,E,R,x,O,z,D,m,N,F,q,J,T=(((be=e[5])==null?void 0:be.length)||0)+"",B,se,V,A,C,w,I,k,re,fe;const $e=[tn,en],oe=[];function ve(X,H){return X[6]&&X[5].length>0?0:1}return A=ve(e),C=oe[A]=$e[A](e),{c(){t=v("div"),l=v("div"),n=v("button"),n.innerHTML='<i class="fas fa-arrows-rotate text-[1.6vh]"></i>',s=$(),o=v("button"),i=v("i"),c=$(),h=v("button"),y=v("i"),M=$(),g=v("button"),g.innerHTML='<i class="fas fa-ban text-[1.6vh]"></i>',E=$(),R=v("button"),x=v("i"),z=$(),D=v("div"),m=v("div"),N=v("div"),F=v("h1"),F.innerHTML=`<i class="fas fa-radio text-blue-400 text-[1.6vh]"></i>
          ACTIVE DISPATCHES`,q=$(),J=v("div"),B=S(T),se=$(),V=v("div"),C.c(),d(n,"class","w-full h-[4vh] flex items-center justify-center bg-slate-800 hover:bg-blue-600 text-slate-300 hover:text-white rounded-lg transition-all duration-200 border border-slate-700 hover:border-blue-500"),d(n,"title","Refresh Alerts"),d(i,"class",r="fas fa-volume-"+(e[4]?"xmark":"high")+" text-[1.6vh]"),d(o,"class",u="w-full h-[4vh] flex items-center justify-center "+(e[4]?"bg-red-900 hover:bg-red-800 border-red-800 hover:border-red-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"),d(o,"title",a=e[4]?"Unmute Dispatch":"Mute Dispatch"),d(y,"class",b="fas fa-"+(e[3]?"bell-slash":"bell")+" text-[1.6vh]"),d(h,"class",p="w-full h-[4vh] flex items-center justify-center "+(e[3]?"bg-amber-900 hover:bg-amber-800 border-amber-800 hover:border-amber-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"),d(h,"title",_=e[3]?"Enable Alerts":"Disable Alerts"),d(g,"class","w-full h-[4vh] flex items-center justify-center bg-slate-800 hover:bg-blue-600 text-slate-300 hover:text-white rounded-lg transition-all duration-200 border border-slate-700 hover:border-blue-500"),d(g,"title","Clear Map Blips"),d(x,"class",O="fas fa-"+(e[2]?"hand-point-left":"hand-point-right")+" text-[1.6vh]"),d(R,"class","w-full h-[4vh] flex items-center justify-center bg-slate-800 hover:bg-blue-600 text-slate-300 hover:text-white rounded-lg transition-all duration-200 border border-slate-700 hover:border-blue-500"),d(R,"title","Toggle Position"),d(l,"class","w-[4vh] h-[85%] flex flex-col gap-[1vh]"),ie(l,"ml-[1vh]",!e[2]),ie(l,"mr-[1vh]",e[2]),d(F,"class","text-white font-semibold text-[1.8vh] flex items-center gap-[1vh]"),d(J,"class","text-blue-400 text-[1.2vh] font-mono"),d(N,"class","flex items-center justify-between"),d(m,"class","bg-slate-900 border-l-4 border-blue-500 p-[1.5vh] mb-[1vh]"),d(V,"class","h-[calc(100%-6vh)] overflow-y-auto pr-[0.5vh]"),d(D,"class","w-[28%] h-[97%] overflow-hidden"),ie(D,"ml-[2vh]",!e[2]),ie(D,"mr-[2vh]",e[2]),d(t,"class",w="w-screen h-screen flex items-center justify-end "+(e[2]?"flex-row":"flex-row-reverse"))},m(X,H){U(X,t,H),f(t,l),f(l,n),f(l,s),f(l,o),f(o,i),f(l,c),f(l,h),f(h,y),f(l,M),f(l,g),f(l,E),f(l,R),f(R,x),f(t,z),f(t,D),f(D,m),f(m,N),f(N,F),f(N,q),f(N,J),f(J,B),f(D,se),f(D,V),oe[A].m(V,null),k=!0,re||(fe=[ue(n,"click",e[15]),ue(o,"click",e[12]),ue(h,"click",e[13]),ue(g,"click",e[16]),ue(R,"click",e[11])],re=!0)},p(X,[H]){var me;e=X,(!k||H&16&&r!==(r="fas fa-volume-"+(e[4]?"xmark":"high")+" text-[1.6vh]"))&&d(i,"class",r),(!k||H&16&&u!==(u="w-full h-[4vh] flex items-center justify-center "+(e[4]?"bg-red-900 hover:bg-red-800 border-red-800 hover:border-red-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"))&&d(o,"class",u),(!k||H&16&&a!==(a=e[4]?"Unmute Dispatch":"Mute Dispatch"))&&d(o,"title",a),(!k||H&8&&b!==(b="fas fa-"+(e[3]?"bell-slash":"bell")+" text-[1.6vh]"))&&d(y,"class",b),(!k||H&8&&p!==(p="w-full h-[4vh] flex items-center justify-center "+(e[3]?"bg-amber-900 hover:bg-amber-800 border-amber-800 hover:border-amber-700":"bg-slate-800 hover:bg-blue-600 border-slate-700 hover:border-blue-500")+" text-slate-300 hover:text-white rounded-lg transition-all duration-200 border"))&&d(h,"class",p),(!k||H&8&&_!==(_=e[3]?"Enable Alerts":"Disable Alerts"))&&d(h,"title",_),(!k||H&4&&O!==(O="fas fa-"+(e[2]?"hand-point-left":"hand-point-right")+" text-[1.6vh]"))&&d(x,"class",O),(!k||H&4)&&ie(l,"ml-[1vh]",!e[2]),(!k||H&4)&&ie(l,"mr-[1vh]",e[2]),(!k||H&32)&&T!==(T=(((me=e[5])==null?void 0:me.length)||0)+"")&&L(B,T);let Me=A;A=ve(e),A===Me?oe[A].p(e,H):(ye(),Y(oe[Me],1,1,()=>{oe[Me]=null}),we(),C=oe[A],C?C.p(e,H):(C=oe[A]=$e[A](e),C.c()),P(C,1),C.m(V,null)),(!k||H&4)&&ie(D,"ml-[2vh]",!e[2]),(!k||H&4)&&ie(D,"mr-[2vh]",e[2]),(!k||H&4&&w!==(w="w-screen h-screen flex items-center justify-end "+(e[2]?"flex-row":"flex-row-reverse")))&&d(t,"class",w)},i(X){k||(P(C),ge(()=>{k&&(I||(I=Ie(t,Ze,{x:e[2]?400:-400},!0)),I.run(1))}),k=!0)},o(X){Y(C),I||(I=Ie(t,Ze,{x:e[2]?400:-400},!1)),I.run(0),k=!1},d(X){X&&j(t),oe[A].d(),X&&I&&I.end(),re=!1,de(fe)}}}function he(e,t){for(let l=0;l<e.length;l++)if(e[l].citizenid===t)return!0;return!1}function zt(e){const l=e.units.length-3;return Math.max(0,l)}function on(e,t,l){let n,s,o,i,r,u,a;Q(e,wt,m=>l(3,s=m)),Q(e,yt,m=>l(4,o=m)),Q(e,kt,m=>l(5,i=m)),Q(e,qe,m=>l(6,r=m)),Q(e,We,m=>l(7,u=m)),Q(e,Xe,m=>l(8,a=m));let c=null,h={},y;tt(()=>{y=at.subscribe(m=>{l(2,n=m)}),qe.subscribe(m=>{console.log("DISPATCH_MENU updated:",m)}),We.subscribe(m=>{console.log("PLAYER updated:",m)}),Xe.subscribe(m=>{console.log("Locale updated:",m)}),kt.subscribe(m=>{console.log("processedDispatchMenu updated:",m)})}),ol(()=>{y()});function b(m){c===m?l(0,c=null):l(0,c=m)}function p(m){l(1,h[m]=!h[m],h)}function _(){l(2,n=!n),at.set(n)}function M(){yt.update(m=>!m),ae("toggleMute",{boolean:o})}function g(){wt.update(m=>!m),ae("toggleAlerts",{boolean:s})}function E(m){return[{icon:"fas fa-clock",label:"Klokkeslett",value:Qe(m.time)},{icon:"fas fa-user",label:"Personalia",value:m.name},{icon:"fas fa-phone",label:"Mobiltelefon",value:m.number},{icon:"fas fa-comment",label:"Info",value:m.information},{icon:"fas fa-map-location-dot",label:"Posisjon",value:m.street},{icon:"fas fa-user",label:"Kjønn",value:m.gender},{icon:"fas fa-gun",label:"Automatisk skuddveksling",value:m.automaticGunFire},{icon:"fas fa-gun",label:"Våpentype",value:m.weapon},{icon:"fas fa-car",label:"Kjøretøymodell",value:m.vehicle},{icon:"fas fa-rectangle-list",label:"Skiltplate",value:m.plate},{icon:"fas fa-droplet",label:"Farge",value:m.color},{icon:"fas fa-car",label:"Klasse",value:m.class},{icon:"fas fa-door-open",label:"Dører",value:m.doors},{icon:"fas fa-compass",label:"Retning",value:m.heading},{icon:"fas fa-user-group",label:"Units",value:m.units.length}]}const R=()=>{ae("refreshAlerts")},x=()=>{ae("clearBlips")},O=m=>b(m.id),z=m=>p(m.id),D=m=>{he(m.units,u.citizenid)?(ae("detachUnit",m),ae("refreshAlerts")):(ae("attachUnit",m),ae("refreshAlerts"))};return l(2,n=!1),[c,h,n,s,o,i,r,u,a,b,p,_,M,g,E,R,x,O,z,D]}class rn extends Le{constructor(t){super(),Re(this,t,on,sn,ke,{})}}function Ht(e,t,l){const n=e.slice();return n[6]=t[l],n[8]=l,n}function Yt(e,t,l){const n=e.slice();return n[9]=t[l],n}function Gt(e){let t,l=e[3](e[6]),n=[];for(let s=0;s<l.length;s+=1)n[s]=Jt(Yt(e,l,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();t=Ce()},m(s,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,o);U(s,t,o)},p(s,o){if(o&9){l=s[3](s[6]);let i;for(i=0;i<l.length;i+=1){const r=Yt(s,l,i);n[i]?n[i].p(r,o):(n[i]=Jt(r),n[i].c(),n[i].m(t.parentNode,t))}for(;i<n.length;i+=1)n[i].d(1);n.length=l.length}},d(s){Ue(n,s),s&&j(t)}}}function Kt(e){let t,l,n,s,o,i=e[9].label+"",r,u,a,c,h=e[9].value+"",y,b;return{c(){t=v("div"),l=v("i"),s=$(),o=v("span"),r=S(i),u=S(":"),a=$(),c=v("span"),y=S(h),b=$(),d(l,"class",n=e[9].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv"),d(o,"class","text-slate-500 min-w-[6vh]"),d(c,"class","text-slate-300"),d(t,"class","flex items-center gap-[0.5vh] text-slate-400")},m(p,_){U(p,t,_),f(t,l),f(t,s),f(t,o),f(o,r),f(o,u),f(t,a),f(t,c),f(c,y),f(t,b)},p(p,_){_&1&&n!==(n=p[9].icon+" text-blue-400 text-[1vh] w-[1.2vh] svelte-1oyl3xv")&&d(l,"class",n),_&1&&i!==(i=p[9].label+"")&&L(r,i),_&1&&h!==(h=p[9].value+"")&&L(y,h)},d(p){p&&j(t)}}}function Jt(e){let t,l=e[9].value&&Kt(e);return{c(){l&&l.c(),t=Ce()},m(n,s){l&&l.m(n,s),U(n,t,s)},p(n,s){n[9].value?l?l.p(n,s):(l=Kt(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){l&&l.d(n),n&&j(t)}}}function Wt(e){let t,l,n,s;return{c(){t=v("div"),l=S("["),n=S(e[2]),s=S("] Respond"),d(t,"class","bg-blue-700 hover:bg-blue-600 text-white px-[1.5vh] py-[0.6vh] text-[1.2vh] font-medium transition-colors duration-200")},m(o,i){U(o,t,i),f(t,l),f(t,n),f(t,s)},p(o,i){i&4&&L(n,o[2])},d(o){o&&j(t)}}}function qt(e,t){let l,n,s,o,i,r=t[6].data.id+"",u,a,c,h=t[6].data.code+"",y,b,p,_,M,g=t[6].data.message+"",E,R,x,O,z,D,m,N,F,q,J,T,B,se,V,A,C=t[6].data&&Gt(t),w=t[8]===0&&Wt(t);return{key:e,first:null,c(){l=v("div"),n=v("div"),s=v("div"),o=v("div"),i=S("#"),u=S(r),a=$(),c=v("div"),y=S(h),p=$(),_=v("div"),M=v("h3"),E=S(g),R=$(),x=v("div"),O=v("i"),N=$(),F=v("div"),q=v("div"),C&&C.c(),J=$(),T=v("div"),w&&w.c(),B=$(),d(o,"class","px-[1vh] py-[0.3vh] bg-blue-600 text-white font-bold text-[1.2vh] font-mono rounded-lg"),d(c,"class",b="px-[1vh] py-[0.3vh] "+(t[6].data.priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"),d(M,"class","text-white text-[1.4vh] font-medium"),d(_,"class","flex-1"),d(O,"class",z=Ge(t[6].data.icon)+" svelte-1oyl3xv"),d(x,"class",D=(t[6].data.priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"),d(s,"class","flex items-center gap-[1vh] svelte-1oyl3xv"),d(n,"class",m=(t[6].data.priority==1?"emergency-overlay":"bg-slate-800")+" p-[1.5vh] border-b "+(t[6].data.priority==1?"emergency-overlay":"border-slate-700")+" svelte-1oyl3xv"),d(q,"class","flex flex-col p-[1.5vh] gap-y-[0.5vh] text-[1.1vh] w-[70%]"),d(T,"class","w-[30%] flex items-end justify-center p-[1.5vh]"),d(F,"class","flex svelte-1oyl3xv"),d(l,"class",se="w-full h-fit my-[0.5vh] "+(t[6].data.priority==1?"border-l-4 emergency-overlay":"border-l-4 border-blue-500")+" "+(t[6].data.priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"),this.first=l},m(I,k){U(I,l,k),f(l,n),f(n,s),f(s,o),f(o,i),f(o,u),f(s,a),f(s,c),f(c,y),f(s,p),f(s,_),f(_,M),f(M,E),f(s,R),f(s,x),f(x,O),f(l,N),f(l,F),f(F,q),C&&C.m(q,null),f(F,J),f(F,T),w&&w.m(T,null),f(l,B),A=!0},p(I,k){t=I,(!A||k&1)&&r!==(r=t[6].data.id+"")&&L(u,r),(!A||k&1)&&h!==(h=t[6].data.code+"")&&L(y,h),(!A||k&1&&b!==(b="px-[1vh] py-[0.3vh] "+(t[6].data.priority==1?"bg-red-600":"bg-slate-700")+" text-white font-semibold text-[1.2vh] rounded-lg"))&&d(c,"class",b),(!A||k&1)&&g!==(g=t[6].data.message+"")&&L(E,g),(!A||k&1&&z!==(z=Ge(t[6].data.icon)+" svelte-1oyl3xv"))&&d(O,"class",z),(!A||k&1&&D!==(D=(t[6].data.priority==1?"text-red-400":"text-blue-400")+" text-[1.4vh]"))&&d(x,"class",D),(!A||k&1&&m!==(m=(t[6].data.priority==1?"emergency-overlay":"bg-slate-800")+" p-[1.5vh] border-b "+(t[6].data.priority==1?"emergency-overlay":"border-slate-700")+" svelte-1oyl3xv"))&&d(n,"class",m),t[6].data?C?C.p(t,k):(C=Gt(t),C.c(),C.m(q,null)):C&&(C.d(1),C=null),t[8]===0?w?w.p(t,k):(w=Wt(t),w.c(),w.m(T,null)):w&&(w.d(1),w=null),(!A||k&1&&se!==(se="w-full h-fit my-[0.5vh] "+(t[6].data.priority==1?"border-l-4 emergency-overlay":"border-l-4 border-blue-500")+" "+(t[6].data.priority==1?"emergency-overlay":"bg-slate-900 hover:bg-slate-800")+" transition-colors duration-200 svelte-1oyl3xv"))&&d(l,"class",se)},i(I){A||(ge(()=>{A&&(V||(V=Ie(l,Ze,{x:t[1]?400:-400},!0)),V.run(1))}),A=!0)},o(I){V||(V=Ie(l,Ze,{x:t[1]?400:-400},!1)),V.run(0),A=!1},d(I){I&&j(l),C&&C.d(),w&&w.d(),I&&V&&V.end()}}}function an(e){let t,l,n=[],s=new Map,o,i,r=e[0].slice().reverse();const u=a=>a[6].data.id;for(let a=0;a<r.length;a+=1){let c=Ht(e,r,a),h=u(c);s.set(h,n[a]=qt(h,c))}return{c(){t=v("div"),l=v("div");for(let a=0;a<n.length;a+=1)n[a].c();d(l,"class","w-[28%] h-[97%]"),ie(l,"ml-[2vh]",!e[1]),ie(l,"mr-[2vh]",e[1]),d(t,"class",o="w-screen h-screen flex justify-end "+(e[1]?"flex-row":"flex-row-reverse")+" items-end")},m(a,c){U(a,t,c),f(t,l);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(l,null);i=!0},p(a,[c]){c&15&&(r=a[0].slice().reverse(),ye(),n=Fl(n,c,u,1,a,r,s,l,Pl,qt,null,Ht),we()),(!i||c&2)&&ie(l,"ml-[2vh]",!a[1]),(!i||c&2)&&ie(l,"mr-[2vh]",a[1]),(!i||c&2&&o!==(o="w-screen h-screen flex justify-end "+(a[1]?"flex-row":"flex-row-reverse")+" items-end"))&&d(t,"class",o)},i(a){if(!i){for(let c=0;c<r.length;c+=1)P(n[c]);i=!0}},o(a){for(let c=0;c<n.length;c+=1)Y(n[c]);i=!1},d(a){a&&j(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function un(e,t,l){let n,s,o;Q(e,fl,a=>l(4,n=a)),Q(e,at,a=>l(1,s=a)),Q(e,ul,a=>l(2,o=a));let i=[];dt.subscribe(a=>{l(0,i=a||[])});function r(a){zl(a)}tt(()=>{i.forEach(a=>{const{data:c,timer:h}=a;setTimeout(()=>{r(c.id)},h)})}),jl(()=>{i.forEach(a=>{const{data:c,timer:h}=a;setTimeout(()=>{r(c.id)},h)})});function u(a){return n?[{label:"Innkommende Anrop",value:a.data.message},{icon:"fas fa-comment",label:"Info",value:a.data.information}]:[{icon:"fas fa-clock",label:"Klokkeslett",value:Qe(a.data.time)},{icon:"fas fa-user",label:"Personalia",value:a.data.name},{icon:"fas fa-phone",label:"Mobiltelefon",value:a.data.number},{icon:"fas fa-comment",label:"Info",value:a.data.information},{icon:"fas fa-map-location-dot",label:"Posisjon",value:a.data.street},{icon:"fas fa-user",label:"Kjønn",value:a.data.gender},{icon:"fas fa-gun",label:"Automatisk skuddveksling",value:a.data.automaticGunFire},{icon:"fas fa-gun",label:"Våpentype",value:a.data.weapon},{icon:"fas fa-car",label:"Kjøretøymodell",value:a.data.vehicle},{icon:"fas fa-rectangle-list",label:"Skiltplate",value:a.data.plate},{icon:"fas fa-droplet",label:"Farge",value:a.data.color},{icon:"fas fa-car",label:"Klasse",value:a.data.class},{icon:"fas fa-door-open",label:"Dører",value:a.data.doors},{icon:"fas fa-compass",label:"Retning",value:a.data.heading}]}return[i,s,o,u]}class fn extends Le{constructor(t){super(),Re(this,t,un,an,ke,{})}}function Xt(e){let t,l,n,s;return t=new Gl({props:{$$slots:{default:[cn]},$$scope:{ctx:e}}}),n=new fn({}),{c(){Ve(t.$$.fragment),l=$(),Ve(n.$$.fragment)},m(o,i){je(t,o,i),U(o,l,i),je(n,o,i),s=!0},i(o){s||(P(t.$$.fragment,o),P(n.$$.fragment,o),s=!0)},o(o){Y(t.$$.fragment,o),Y(n.$$.fragment,o),s=!1},d(o){Te(t,o),o&&j(l),Te(n,o)}}}function cn(e){let t,l;return t=new rn({}),{c(){Ve(t.$$.fragment)},m(n,s){je(t,n,s),l=!0},i(n){l||(P(t.$$.fragment,n),l=!0)},o(n){Y(t.$$.fragment,n),l=!1},d(n){Te(t,n)}}}function Zt(e){let t,l,n,s;return t=new ql({}),{c(){Ve(t.$$.fragment),l=$(),n=v("body"),d(n,"class","bg-neutral-700")},m(o,i){je(t,o,i),U(o,l,i),U(o,n,i),s=!0},i(o){s||(P(t.$$.fragment,o),s=!0)},o(o){Y(t.$$.fragment,o),s=!1},d(o){Te(t,o),o&&j(l),o&&j(n)}}}function dn(e){let t,l,n,s,o,i=e[0]&&Xt(e);l=new Zl({});let r=e[1]&&Zt();return{c(){i&&i.c(),t=$(),Ve(l.$$.fragment),n=$(),r&&r.c(),s=Ce()},m(u,a){i&&i.m(u,a),U(u,t,a),je(l,u,a),U(u,n,a),r&&r.m(u,a),U(u,s,a),o=!0},p(u,[a]){u[0]?i?a&1&&P(i,1):(i=Xt(u),i.c(),P(i,1),i.m(t.parentNode,t)):i&&(ye(),Y(i,1,1,()=>{i=null}),we()),u[1]?r?a&2&&P(r,1):(r=Zt(),r.c(),P(r,1),r.m(s.parentNode,s)):r&&(ye(),Y(r,1,1,()=>{r=null}),we())},i(u){o||(P(i),P(l.$$.fragment,u),P(r),o=!0)},o(u){Y(i),Y(l.$$.fragment,u),Y(r),o=!1},d(u){i&&i.d(u),u&&j(t),Te(l,u),u&&j(n),r&&r.d(u),u&&j(s)}}}function hn(e,t,l){let n,s,o;return Q(e,rt,i=>l(2,n=i)),Q(e,Xe,i=>l(0,s=i)),Q(e,lt,i=>l(1,o=i)),ll(rt,n="ps-dispatch",n),[s,o]}class vn extends Le{constructor(t){super(),Re(this,t,hn,dn,ke,{})}}new vn({target:document.getElementById("app")});
